# 自我介绍
面试官好，我叫叶嘉轩，现在就读于广东工业大学，是一名计算机科学与技术专业的大三在校生。我是在大一下学期的时候开始接触的iOS开发，当时是参加了学校里的TopView工作室的iOS招新，从而开始对iOS方面的了解、学习。在这一年多的学习时间里，主要是在维护工作室的项目，对一些bug的修复以及对项目的优化，平时会看看书或者上掘金、简书去学习一些技术博客，自己也会对学过的知识点进行总结，将一些比较有价值的知识点会发布到自己的博客上。以上就是我的自己介绍，谢谢！


# 项目有没有用到解耦的
可以将一下将MVC模式转换为MVVM/MVP模式，将网络请求，一些交互转移到了VM层/P层，让C层没那么臃肿，同时还能实现解耦。
或者可以讲一下组件化，自定义View，减少C层跟V层的耦合度。

项目中有些地方会讲MVC模式转换为MVVM模式，将本来堆积在C层中的网络请求部分以及交互更新model层数据的业务抽离到了ViewModel层，Controller层只需要调用一下ViewModel中暴露出去的接口，就可以进行网络请求，这样可以大大减少Controller层的臃肿，以及降低耦合度。

项目中还有些地方是使用了自定义的View，在自定义View上添加好对应的子View，做好布局，Controller层在布局的时候只是实例化自定义View的对象并传入对应的位置、大小，就可以将整个View创建出来，降低了耦合度。

# MVC、MVP、MVVM的区别

# 项目中的性能优化
- 可以讲一下利用静态clang插桩来实现二进制重排从而加速App的启动。
    - 这部分可以说多点感觉
    - 由于可执行文件的链接顺序是按照编译顺序链接的，并不是按照调用顺序链接的，那么就有可能出现App启动所需要调用的函数分散得很远，从而需要更多的缺页中断次数，才能完成App的启动。而缺页中断是需要将数据从硬盘加载到内存，是非常耗时的，那么减少缺页中断的次数可以大大加快App的启动时间。
    - clang插桩就是在编译时给程序的每个函数的开头都插入一个函数，那么在插入的函数被调用时，就会收集PC寄存器里下一条指令的地址，根据获取到的地址得出函数符号，那么就可以顺利收集到App启动所需要的函数。
    - 将收集到的启动所需要的函数写入link order文件，这个文件是链接器在链接时会根据文件里的符号顺序进行链接的，那么这样就可以实现将启动所需要的符号都排在了可执行文件的前面。下次，App再次启动的时候就可以大大加快启动速度。
    - App启动的缺页中断次数是可以通过Instruments工具里的system trace来观察到的。
- 减少离屏渲染的问题
    - 这里可以先不说：只是复习的时候整理一下 ————————— 离屏渲染的概念：在正常渲染流程中，GPU渲染完之后将数据输出到FrameBuffer即帧缓冲区，当VSYC垂直同步信号到来时，显示器会扫描帧缓冲区内的数据然后显示出来，但是有时面临一些限制，无法将渲染结果直接写进帧缓冲区里面，那么就需要额外创建一个缓冲区OffScreen Buffer，将数据暂时存放到离屏缓冲区内，完成将结果切换到frame Buffer里，这个过程就叫做离屏渲染。
    - 这里开始说：当TableView中的每一个cell都会有imageView 设置了圆角，边框并且调用了裁剪方法，那么这时候就会触发离屏渲染，每一个cell都会触发离屏渲染，那这样对App的性能损耗是非常大的。解决办法就是：利用贝塞尔曲线将显示的样式绘制出来，赋值到CAShapeLayer的path属性上，将layer添加到View的layer上，这样可以在不产生离屏幕渲染的情况下实现圆角的效果。
- 清理内存泄漏的问题
    - 在项目里比较常见到的内存泄漏主要是Block、delegate以及NSTImer。
    - 当将Block声明为类的属性时，Block在实现时又捕捉到了self，那么就会有循环引用问题，这种情况可以弱化self来避免循环引用问题
    - delegate在声明时如果使用了strong修饰，也是会存在循环引用问题，这种情况就得将strong修饰符改为weak修饰符
    - 而NStimer就容易出现强引用跟循环引用问题，在主线程初始化的NSTimer默认是会被添加到主线程的RunLoop上的，那么RunLoop就会对当前timer有一个强引用，如果timer在初始化时使用了addtarget的方式，那么timer也会强引用着self，这样就很容易出现强引用造成self释放不了或者循环引用的问题。这种情况就需要在viewdidappera方法或者重写dealloc方法里对计时器设置为不可用并置为nil，对于循环引用，在NStimer初始化时可以使用block的形式初始化，或者利用NSProxy抽象基类来实现消息转发。
    - 在Xcode的Instruments工具里，有个Leaks的工具可以检测整个工程项目下的内存泄漏问题。
    - 或者在项目中导入MLeaksFinder第三方框架，该框架发现出现内存泄漏问题时就会弹出弹窗通知哪里出现了内存泄漏问题。
- UITableView的优化
    - cell的复用。当tableView上要展示多个cell时，如果每个cell都是新创建出来的，那么会很占内存。解决办法就是利用cell的复用，系统会根据tableViwe的高度以及cell的高度去判断创建多少个cell，以后tableView在滑动时，就复用之前创建的cell。（比如当前页面展示6个cell，那么一般会创建7个cell）
    - 尽量少在cellForRowAtIndexPath中设置数据，因为假如有100个cell，那么会给每个cell都设置了数据，但是显示在屏幕上往往就几个cell，那么这样就会很耗费加载时间。可以在willDisplayCell里进行数据的设置，那么就只会在cell显示的时候才会给当前cell设置数据。
    - 提前计算好cell要显示的数据并做好缓存。
    - 加载网络数据，下载图片时使用异步加载，并且做好缓存
    - 当只是更新某些cell的数据时可以使用局部更新。
        - reloadSection实现局部更新
        - 或者使用iOS13以后的Data Source新特性：基于Diffable的局部更新
        - reloadSection实现局部更新是将cell删了重新复用一个，而新特性是在之前的基础上进行数据的修改
    - 当cell在快速滑动时，不加载cell，等到滑动停止了才去加载cell
    - 创建cell的时候就完成布局，在后期设置cell的数据时尽量去添加移除cell内部的控件。
    - 减少离屏渲染的问题。当每个cell都有View同时设置了图片跟切了圆角，那么每个cell都产生离屏渲染，这样对App的性能损耗是很大的。解决办法就是利用贝塞尔曲线绘制出圆角，同时结合CAShapeLayer的使用来实现View的设置图片以及切圆角。

## YTK源码
