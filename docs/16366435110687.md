# 计网面试整体
[TOC]
## HTTP常见面试题
![](media/16366435110687/16366440418195.jpg)

### HTTP基本知识
#### HTTP基本概念
HTTP是超文本传输协议。超文本传输协议可以分成三部分来理解：协议、传输、超文本。
- 协议：针对协议，我们可以这么理解HTTP：HTTP是一个用在计算机世界里的协议。它使用计算机能够理解的语言确立了一种计算机之间交流通信的规范，以及相关的各种控制和错误处理方式。
- 传输：针对传输，我们理解HTTP是一个在计算机世界里专门用来在两点之间传输数据的约定和规范。
- 超文本：HTTP传输的内容是超文本。超文本是文字、图片、视频等的混合体，最关键有超链接，能从一个超文本条环到另外一个超文本。HTML就是最常见的超文本，它本身只是纯文字文件，但在标签的修饰之下，再经过浏览器的解释，呈现出来的一个文字、有画面的网页。
那么，综合来说，HTTP是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。

#### HTTP常见的状态码
HTTP常见的状态码有五种类型。
- 以1开头的：1开头的状态码主要表示当前报文正在被处理。
- 以2开头的：2开头的状态码主要表示报文已经收到并被正确处理；其中常见的有 200状态码是常见的成功状态码，表示一切正常；204状态码也是常见的成功状态码，与200状态码基本相同，但是响应没有主体数据；206状态码也是成功状态码，这是应用于HTTP分块下载或断点续传，表示响应返回的主体数据并不是资源的全部，而是其中的一部分。
- 以3开头的：3开头的状态码表示客户端请求的资源发生了变化，需要客户端用新的URI重新发送请求获取资源，也就是重定向。其中常见的状态码有 301状态码表示永久重定向，说明请求的资源已经不存在了，需要改用新的URI再次访问；302状态码表示临时重定向，说明请求的资源还在，但暂时需要用另一个URI来访问。301和302都会在响应头里使用字段Location，指明后续要跳转的URI，浏览会自动重定向到新的URI；304状态码表示资源未修改、更新。
- 以4开头的：4开头的状态码表示客户端发送的报文有误，服务器无法正确处理。其中常见的状态码有 400状态码表示客户端的请求报文有语法错误；403状态码表示服务器禁止访问资源，并不是客户端的请求出错；404状态码表示请求的资源在服务器上不存在或找不到。
- 以5开头的：5开头的状态码表示客户端请求报文正确，但是服务器处理时内部发生了错误，属于服务器端的错误码；其中常见的状态码有：500状态码：服务器处理时发生了错误，但是具体是什么错误并不知道；501状态码表示客户端请求的功能还不支持；502状态码表示服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误；503状态码表示服务器当前很忙，暂时无法响应。

#### HTTP常见字段
- Host字段：客户端发送请求时，用来指定服务器的域名。有了Host字段，就可以将请求发往同一台服务器上的不同网站。
- Content-Length字段：服务器在返回数据时，会有Content-Length字段，表明本次返回的数据长度。
- Connection 字段：“Connection 字段最常用于客户端要求服务器使用 TCP 持久连接，以便其他请求复用。
- “Content-Type 字段”：“Content-Type 字段用于服务器回应时，告诉客户端，本次数据是什么格式。”
- Accept: */*：“上面代码中，客户端声明自己可以接受任何格式的数据。”
- “Content-Encoding 字段”：“Content-Encoding 字段说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式”

#### GET和POST的区别
- “Get 方法的含义是请求从服务器获取资源，这个资源可以是静态的文本、页面、图片视频等。”“POST 方法则是相反操作，它向 URI 指定的资源提交数据，数据就放在报文的 body 里。”
- “ GET 方法就是安全且幂等的，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。POST 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是不安全的，且多次提交数据就会创建多个资源，所以不是幂等的。”

> “在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。
> 所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的。”

#### HTTP特性
##### HTTP1.1的优点
“HTTP 最凸出的优点是「简单、灵活和易于扩展、应用广泛和跨平台」。”
1. 简单
    1. “HTTP 基本的报文格式就是 header + body，头部信息也是 key-value 简单文本的形式，易于理解，降低了学习和使用的门槛。”
2. “灵活和易于扩展”
    1. “HTTP协议里的各类请求方法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发人员自定义和扩充。” 
    2. “同时 HTTP 由于是工作在应用层（ OSI 第七层），则它下层可以随意变化。HTTPS 也就是在 HTTP 与 TCP 层之间增加了 SSL/TLS 安全传输层，HTTP/3 甚至把 TCP 层换成了基于 UDP 的 QUIC。”
3. “应用广泛和跨平台”
    1. “互联网发展至今，HTTP 的应用范围非常的广泛，从台式机的浏览器到手机上的各种 APP，从看新闻、刷贴吧到购物、理财、吃鸡，HTTP 的应用遍地开花，同时天然具有跨平台的优越性。”
##### 缺点
“HTTP 协议里有优缺点一体的双刃剑，分别是「无状态、明文传输」，同时还有一大缺点「不安全」。”   
1. “无状态双刃剑”
    1. “无状态的好处，因为服务器不会去记忆 HTTP 的状态，所以不需要额外的资源来记录状态信息，这能减轻服务器的负担，能够把更多的 CPU 和内存用来对外提供服务。”
    2. “无状态的坏处，既然服务器没有记忆能力，它在完成有关联性的操作时会非常麻烦。”“例如登录->添加购物车->下单->结算->支付，这系列操作都要知道用户的身份才行。但服务器不知道这些请求是有关联的，每次都要问一遍身份信息。”
    3. “对于无状态的问题，解法方案有很多种，其中比较简单的方式用 Cookie 技术。Cookie 通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。”
2. 明文传输双刃剑
    1. “明文意味着在传输过程中的信息，是可方便阅读的，通过浏览器的 F12 控制台或 Wireshark 抓包都可以直接肉眼查看，为我们调试工作带了极大的便利性。”
    2. “但是这正是这样，HTTP 的所有信息都暴露在了光天化日下，相当于信息裸奔。在传输的漫长的过程中，信息的内容都毫无隐私可言，很容易就能被窃取，如果里面有你的账号密码信息，那你号没了。”
3. 不安全 “HTTP 比较严重的缺点就是不安全：”
    1. “通信使用明文（不加密），内容可能会被窃听。比如，账号信息容易泄漏，那你号没了。”
    2. “不验证通信方的身份，因此有可能遭遇伪装。比如，访问假的淘宝、拼多多，那你钱没了。”
    3. “无法证明报文的完整性，所以有可能已遭篡改。比如，网页上植入垃圾广告，视觉污染，眼没了。”
“HTTP 的安全问题，可以用 HTTPS 的方式解决，也就是通过引入 SSL/TLS 层，使得在安全上达到了极致。”

##### HTTP/1.1性能如何
“HTTP 协议是基于 TCP/IP，并且使用了「请求 - 应答」的通信模式，所以性能的关键就在这两点里。”
1. 长连接
    1. “早期 HTTP/1.0 性能上的一个很大的问题，那就是每发起一个请求，都要新建一次 TCP 连接（三次握手），而且是串行请求，做了无谓的 TCP 连接建立和断开，增加了通信开销。”
    2. “为了解决上述 TCP 连接问题，HTTP/1.1 提出了长连接的通信方式，也叫持久连接。这种方式的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。”
    3. “持久连接的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。”
2. 管道网络传输：“HTTP/1.1 采用了长连接的方式，这使得管道（pipeline）网络传输成为了可能。”
    1. “即可在同一个 TCP 连接里面，客户端可以发起多个请求，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。”
    2. “举例来说，客户端需要请求两个资源。以前的做法是，在同一个TCP连接里面，先发送 A 请求，然后等待服务器做出回应，收到后再发出 B 请求。管道机制则是允许浏览器同时发出 A 请求和 B 请求。”
    3. “但是服务器还是按照顺序，先回应 A 请求，完成后再回应 B 请求。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为「队头堵塞”
3. 队头阻塞：“请求 - 应答」的模式加剧了 HTTP 的性能问题。” 
    1. “因为当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一同被阻塞了，会招致客户端一直请求不到数据，这也就是「队头阻塞」。”

